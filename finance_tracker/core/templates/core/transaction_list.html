{% extends "base.html" %}

{% block content %}
<h2>Ваши операции</h2>
<form method="get">
    <label>С: <input type="date" name="date_from" value="{{ request.GET.date_from }}"></label>
    <label>По: <input type="date" name="date_to" value="{{ request.GET.date_to }}"></label>
    <label>Категория:
        <select name="category">
            <option value="">Все</option>
            {% for cat in categories %}
                <option value="{{ cat.id }}"{% if request.GET.category == cat.id|stringformat:"s" %} selected{% endif %}>
                    {{ cat.name }}
                </option>
            {% endfor %}
        </select>
    </label>
    <button type="submit">Фильтровать</button>
</form>
   <p><a href="{% url 'add_transaction' %}">Добавить операцию</a> |
      <a href="{% url 'add_category' %}">Добавить категорию</a></p>
<ul>
    {% for t in transactions %}
        <li>{{ t.date }} — {{ t.amount }} ({{ t.get_type_display }}) — {{ t.category }}</li>
    {% empty %}
        <li>Пока нет операций</li>
    {% endfor %}
</ul>
{% endblock %}
